# Copyright (c) 2021 by Michael Arsollon
# derived from original game at https://github.com/endless-sky/endless-sky
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.



mission "Bounty Hunting: Angry Chicken"
	job
	name "Wanted Bandit near <system>"
	description "An old Firebird named the <npc> has been attacking merchants near <system>. Eliminate the ship, then report to <destination>. Payment is <payment>."
	source
		attributes "dirt belt" "south" "rim" "frontier"
	to offer
		random < 50
	npc kill
		government "Bounty"
		system
			distance 1 2
		personality target waiting staying plunders harvests
			confusion 20
		ship "Modified Firebird" "Angry Chicken"
		dialog phrase "generic hunted bounty eliminated dialog"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 100000
		event "add energy cannon variants"
		dialog phrase "generic bounty hunting payment dialog"

mission "Bounty Hunting: Tweedledee & Tweedledum"
	job
	name "Wanted Bandit near <system>"
	description "A pair of old Berserkers named the Tweedledee & Tweedledum have been attacking merchants near <system>. Eliminate these ships, then report to <destination>. Payment is <payment>."
	source
		attributes "dirt belt" "south" "rim" "frontier"
	to offer
		has "Bounty Hunting: Angry Chicken: done"
		random < 50
	npc kill
		government "Bounty"
		system
			distance 1 2
		personality target waiting staying plunders harvests
			confusion 20
		ship "Berserker (Energy Cannons)" "Tweedledee"
		ship "Berserker (Energy Cannons)" "Tweedledum"
		dialog `Tweedledee & Tweedledum have been eliminated. You can claim the bounty payment by returning to <destination>.`
	on visit
		dialog `You've landed on <planet>, but Tweedledee & Tweedledum have not been eliminated yet. Hunt them down and destroy them before returning.`
	on complete
		payment 125000
		dialog `The government of <planet> gratefully pays you <payment> for eliminating Tweedledee & Tweedledum.`

mission "Bounty Hunting: Mother Goose"
	job
	name "Wanted Bandit near <system>"
	description "An old Aerie named the Mother Goose and its fighters have been attacking merchants near <system>. Eliminate the fleet, then report to <destination>. Payment is <payment>."
	source
		attributes "dirt belt" "south" "rim" "frontier"
	to offer
		has "Bounty Hunting: Tweedledee & Tweedledum: done"
		random < 50
	npc kill
		government "Bounty"
		system
			distance 1 2
		personality target waiting staying plunders harvests
			confusion 20
		ship "Aerie (Energy Cannons)" "Mother Goose"
		ship "Dagger" "Jack"
		ship "Dagger" "Jill"
		dialog `The Mother Goose and their fleet have been eliminated. You can claim the bounty payment by returning to <destination>.`
	on visit
		dialog `You've landed on <planet>, but the Mother Goose has not been eliminated yet. Hunt it down and destroy it before returning.`
	on complete
		payment 150000
		dialog `The government of <planet> gratefully pays you <payment> for eliminating the Mother Goose and their fleet.`

mission "Bounty Hunting: Humpty Dumpty"
	job
	name "Wanted Bandit near <system>"
	description "An old Hauler named the <npc> has been attacking merchants near <system>. Eliminate the ship, then report to <destination>. Payment is <payment>."
	source
		attributes "dirt belt" "south" "rim" "frontier"
	to offer
		has "Bounty Hunting: Mother Goose: done"
		random < 50
	npc kill
		government "Bounty"
		system
			distance 1 2
		personality target waiting staying plunders harvests
			confusion 20
		ship "Hauler (Energy Cannons)" "Humpty Dumpty"
		dialog phrase "generic hunted bounty eliminated dialog"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 175000
		dialog phrase "generic bounty hunting payment dialog"



mission "Executive Guard: Syndicate Extremists"
	landing
	invisible
	destination "Buccaneer Bay"
	clearance
	to offer
		has "FW Syndicate Extremists 1A: done"
		"ships: Heavy Freighter" + "ships: Medium Warship" + "ships: Heavy Warship" > 7
	npc
		government "Syndicate (Extremist)"
		system Algenib
		personality waiting staying heroic
		ship "Executive Guard" "S.S. Longinus"
		ship "Barb (Proton)" "F-001" 
		ship "Barb (Proton)" "F-002"
		ship "Barb (Proton)" "F-003"
		ship "Barb (Proton)" "F-004"
		ship "Barb (Proton)" "F-005"
		ship "Barb (Proton)" "F-006"
	npc evade
		to spawn
			"ships: Heavy Freighter" + "ships: Medium Warship" + "ships: Heavy Warship" > 9
		government "Syndicate (Extremist)"
		system Algenib
		personality waiting staying heroic
		fleet
			names "syndicate capital"
			variant
				"Protector (Proton)" 2
	npc evade
		to spawn
			"ships: Heavy Freighter" + "ships: Medium Warship" + "ships: Heavy Warship" > 11
		government "Syndicate (Extremist)"
		system Algenib
		personality waiting staying heroic
		fleet
			names "syndicate capital"
			variant
				"Vanguard" 2



mission "Executive Guard: Syndicated Systems"
	job
	passengers 1
	name "Ransom: Syndicated Systems"
	description "Kidnap the president of Syndicated Systems, who usually rides on the S.S. Magnus at <waypoints>. Then return to <destination> with him, where he will be held for ransom. Payment is <payment>."
	waypoint "Markab"
	source
		government "Pirate"
	to offer
		has "main plot completed"
	on offer
		require "Brig"
	on accept
		conversation
			scene "ship/executive guard/executive guard"
			`This is no small job. The CEO of Syndicated Systems will be riding an Executive Guard, a powerful warship the Syndicate reserves for use only by corporate VIPs.`
				accept
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Shipyards: active"
				has "Executive Guard: Syndicated Shipyards: done"
				has "Executive Guard: Syndicated Shipyards: failed"
		government "Syndicate"
		system Achernar
		personality entering nemesis heroic vindictive
		fleet "Hired Guns"
		fleet "Bounty Hunter" 2
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Shipyards: active"
				has "Executive Guard: Syndicated Shipyards: done"
				has "Executive Guard: Syndicated Shipyards: failed"
		government "Syndicate"
		system Markab
		personality entering nemesis heroic vindictive
		fleet "Hired Guns"
		fleet "Bounty Hunter" 2
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Shipyards: active"
				has "Executive Guard: Syndicated Shipyards: done"
				has "Executive Guard: Syndicated Shipyards: failed"
		government "Syndicate"
		system Markab
		personality waiting staying heroic
		fleet
			names "syndicate capital"
			variant
				"Vanguard (Proton Gun-CF8)"
				"Vanguard"
				"Protector (Proton)" 2
		fleet
			names "syndicate small"
			variant
				"Splinter (Proton)" 2
				"Manta (Proton)" 4
				"Quicksilver (Proton)" 5
				"Wasp (Proton)" 5
	npc board
		government "Syndicate"
		system Markab
		personality waiting staying heroic
		ship "Executive Guard" "S.S. Magnus"
		ship "Barb (Proton)" "F-001" 
		ship "Barb (Proton)" "F-002"
		ship "Barb (Proton)" "F-003"
		ship "Barb (Proton)" "F-004"
		ship "Barb (Proton)" "F-005"
		ship "Barb (Proton)" "F-006"
		dialog `You've captured the CEO of Syndicated Systems! Return to <destination> where he'll be held for ransom.`
	on fail
		"reputation: Pirate" --
		"reputation: Syndicate" <?= -1000
	on complete
		payment 10000000
		"reputation: Pirate" += 100
		"reputation: Syndicate" <?= -1000
		conversation
			scene "outfit/brig"
			`You present the CEO to the pirates. They are in awe of your accomplishment. A few warlords confide to you that this job was only intended as a joke and they never actually expected anyone to pull it off.`
			`	Despite this, the pirates are able to negotiate with the Syndicate. The CEO is easily ransomed off for the requested amount. You claim your share of the ransom money, <payment>. Naturally, this stunt has made you an enemy of the Syndicate. Their security forces will be looking to collect bonus pay for your head.`

mission "Executive Guard: Syndicated Shipyards"
	job
	passengers 1
	name "Ransom: Syndicated Shipyards"
	description "Kidnap the president of Syndicated Shipyards, who usually rides on the S.S. Decimus at <waypoints>. Then return to <destination> with him, where he will be held for ransom. Payment is <payment>."
	waypoint "Achernar"
	source
		government "Pirate"
	to offer
		has "main plot completed"
	on offer
		require "Brig"
	on accept
		conversation
			scene "ship/executive guard/executive guard"
			`This is no small job. The CEO of Syndicated Systems will be riding an Executive Guard, a powerful warship the Syndicate reserves for use only by corporate VIPs.`
				accept
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Systems: active"
				has "Executive Guard: Syndicated Systems: done"
				has "Executive Guard: Syndicated Systems: failed"
		government "Syndicate"
		system Markab
		personality entering nemesis heroic vindictive
		fleet "Hired Guns"
		fleet "Bounty Hunter" 2
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Systems: active"
				has "Executive Guard: Syndicated Systems: done"
				has "Executive Guard: Syndicated Systems: failed"
		government "Syndicate"
		system Achernar
		personality entering nemesis heroic vindictive
		fleet "Hired Guns"
		fleet "Bounty Hunter" 2
	npc
		to spawn
			or
				has "Executive Guard: Syndicated Systems: active"
				has "Executive Guard: Syndicated Systems: done"
				has "Executive Guard: Syndicated Systems: failed"
		government "Syndicate"
		system Achernar
		personality waiting staying heroic
		fleet
			names "syndicate capital"
			variant
				"Vanguard (Proton Gun-CF8)"
				"Vanguard"
				"Protector (Proton)" 2
		fleet
			names "syndicate small"
			variant
				"Splinter (Proton)" 2
				"Manta (Proton)" 4
				"Quicksilver (Proton)" 5
				"Wasp (Proton)" 5
	npc board
		government "Syndicate"
		system Achernar
		personality waiting staying heroic
		ship "Executive Guard" "S.S. Decimus"
		ship "Barb (Proton)" "F-001" 
		ship "Barb (Proton)" "F-002"
		ship "Barb (Proton)" "F-003"
		ship "Barb (Proton)" "F-004"
		ship "Barb (Proton)" "F-005"
		ship "Barb (Proton)" "F-006"	
		dialog `You've captured the CEO of Syndicated Systems! Return to <destination> where he'll be held for ransom.`
	on fail
		"reputation: Pirate" --
		"reputation: Syndicate" <?= -1000
	on complete
		payment 10000000
		"reputation: Pirate" += 100
		"reputation: Syndicate" <?= -1000
		conversation
			scene "outfit/brig"
			`You present the CEO to the pirates. They are in awe of your accomplishment. A few warlords confide to you that this job was only intended as a joke and they never actually expected anyone to pull it off.`
			`	Despite this, the pirates are able to negotiate with the Syndicate. The CEO is easily ransomed off for the requested amount. You claim your share of the ransom money, <payment>. Naturally, this stunt has made you an enemy of the Syndicate. Their security forces will be looking to collect bonus pay for your head.`



mission "Testing: Proton Gun-CF8"
	name "Syndicate weapons test"
	job
	description "Disable the robotic target dummy ship in <system>, collect test data for Syndicate engineers by scanning its outfits, and land on <planet>. Warning: the target ship is programmed to engage in self-defense behaviors to ensure a realistic simulation. Payment is <payment>."
	source
		government Syndicate
	destination
		distance 1 3
		government Syndicate
	to offer
		has "main plot completed"
		random < 60
		"combat rating" > 1000
		"destroyed Syndicate target ship" < 3
	npc save disable "scan outfits"
		government "Test Dummy"
		personality disables staying heroic target
			confusion 120
		system destination
		ship "Vanguard Test-PGCF8" "Syndicate Test Vessel"
		conversation
			scene "outfit/proton gun-cf8"
			"You scan the disabled craft and take careful measurements of the battle damage. While doing so, you notice the Proton Guns on this ship must be some new model they wanted to test. Time to deliver the results on <planet>."
	on visit
		dialog "You forgot to either disable or scan the target dummy ship in <system>! You'll need to head back there and do that before you can return here for payment."
	on abort
		# No penalty
	on fail
		dialog "The robotic target ship has been destroyed. You are hailed by an angry Syndicate official who fines you <payment> and warns you that further mistakes of this nature may remove you from eligibility for these jobs."
		"destroyed Syndicate target ship" += 3
		"reputation: Syndicate" -= 3
		payment -2000000
	on complete
		payment 125000
		event "Proton Gun-CF8 added to outfitters" 30
		dialog "You transmit the scan results to a team of eager engineers and collect your payment of <payment>."

event "Proton Gun-CF8 added to outfitters"
	outfitter "Syndicate Advanced"
		add "Proton Gun-CF8"

ship "Vanguard" "Vanguard Test-PGCF8"
	add attributes
		"automaton" 1
		"self destruct" 1
	outfits
		"Proton Gun-CF8" 7
		"Anti-Missile Turret"
		"Fusion Reactor"
		"LP144a Battery Pack"
		"S-970 Regenerator"
		"Liquid Nitrogen Cooler"
		"Laser Rifle" 4
		"X3700 Ion Thruster"
		"X4200 Ion Steering"
		"Hyperdrive"



##########################
# Jobs that repeat
##########################

mission "Bounty Hunting (Secret Prototype)"
	name "Stolen prototype near <system>"
	description "A heavy warship known as the <npc> has stolen a secret prototype near the <system> system. Recover the cargo and return it to <planet> for <payment>."
	repeat
	job
	to offer
		"combat rating" > 1000
		random < 10
	source
		government "Republic" "Free Worlds" "Syndicate" "Neutral" "Independent"
		attributes "rim" "south" "north" "dirt belt" "core" "frontier"
	npc board
		government "Bounty (Disguised)"
		personality heroic staying marked target
		system
			distance 2 3
		fleet
			names "pirate"
			variant
				"Marauder Falcon (Secret Prototype)"
			variant
				"Marauder Leviathan (Secret Prototype)"
			variant
				"Marauder Protector (Secret Prototype)"
			variant
				"Marauder Vanguard (Secret Prototype)"
		dialog `Retrieve the Secret Prototype and return it to <destination>.`
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		outfit "Secret Prototype" -1
		payment 1500000
		dialog "The authorities pay you <payment> for returning the Secret Prototype."

outfit "Secret Prototype"
	category "Special"
	cost 0
	thumbnail "outfit/unknown"
	"mass" 1
	description "A secret prototype stolen from a merchant vessel. You have no idea how it works." 
		


mission "Protection: Heavy"
	job
	repeat 5
	deadline 15
	name "Protection Escort"
	description "Pay the <npc> 125,000 credits to escort your fleet until <date>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Neutral"
	to offer
		random < 20
		"ships: Medium Warship" < 5
		"ships: Heavy Warship" <= 1
	on accept
		payment -125000
		dialog `You pay the <npc> 125,000 credits to escort your fleet until <date>.`
	on fail
		dialog `The protection contract with <npc> has expired.`
	npc kill
		government "Merchant"
		personality heroic
		fleet "Protection Heavy"

mission "Protection: Medium"
	job
	repeat 10
	deadline 15
	name "Protection Escort"
	description "Pay the <npc> 100,000 credits to escort your fleet until <date>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Neutral"
	to offer
		random < 25
		"ships: Medium Warship" <= 1
		not "ships: Heavy Warship"
	on accept
		payment -100000
		dialog `You pay the <npc> 100,000 credits to escort your fleet until <date>.`
	on fail
		dialog `The protection contract with <npc> has expired.`
	npc kill
		government "Merchant"
		personality heroic
		fleet "Protection Medium"
				
mission "Protection: Light"
	job
	repeat 15
	deadline 15
	name "Protection Escort"
	description "Pay the <npc> 80,000 credits to escort your fleet until <date>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Neutral"
	to offer
		random < 30
		"ships: Light Warship" < 5
		not "ships: Medium Warship"
	on accept
		payment -80000
		dialog `You pay the <npc> 80,000 credits to escort your fleet until <date>.`
	on fail
		dialog `The protection contract with <npc> has expired.`
	npc kill
		government "Merchant"
		personality heroic
		fleet "Protection Light"
			
mission "Protection: Marauder"
	job
	repeat 5
	deadline 15
	name "Protection Escort"
	description "Pay the <npc> 100,000 credits to escort your fleet until <date>."
	source
		attributes "frontier" "rim"
	to offer
		random < 30
	on accept
		payment -100000
		dialog `You pay the <npc> 100,000 credits to escort your fleet until <date>.`
	on fail
		dialog `The protection contract with <npc> has expired.`
	npc kill
		government "Independent"
		personality plunders heroic
		fleet "Marauder Independent"



####################
# Cryostasis Pod Jobs require a "Cryostasis Pod" from Genesis
####################

mission "Cryostasis Prisoner (source)"
	job
	repeat
	deadline
	passengers 1
	name "Cryostasis Prisoner"
	description "A notorious pirate captain has finally been convicted and sentenced to life in prison. Transport this dangerous criminal to <destination>. Only the most secure transports will be offered this job. Payment is <payment>."
	source
		government "Republic" "Free Worlds" "Syndicate"
		not attributes "uninhabited" "deep"
	destination "Huginn Station"
	to offer
		random < 25
	on offer
		require "Brig"
		require "Cryostasis Pod"
	npc evade
		government "Pirate"
		personality heroic harvests plunders
		fleet "Marauder fleet VIII"
	npc evade
		government "Pirate"
		system
			distance 1
		personality heroic harvests plunders
		fleet "Marauder fleet IX"
	npc evade
		government "Pirate"
		system
			distance 2
		personality heroic harvests plunders
		fleet "Marauder fleet X"
	on complete
		payment 25000 175
		payment 100000
		dialog `The cryostasis pod opens with a hiss. Your passenger wakes up and, before she's fully conscious, a team of well-armed guards takes her away. You collect your payment of <payment>.`
		
mission "Cryostasis Prisoner (destination)"
	job
	repeat
	deadline
	passengers 1
	name "Cryostasis Prisoner"
	description "A notorious pirate captain has finally been convicted and sentenced to life in prison. Transport this dangerous criminal to <destination>. Only the most secure transports will be offered this job. Payment is <payment>."
	source
		government "Republic" "Free Worlds" "Syndicate"
		not attributes "uninhabited" "deep"
	destination "Huginn Station"
	to offer
		random < 25
	on offer
		require "Brig"
		require "Cryostasis Pod"
	npc evade
		government "Pirate"
		system destination
		personality heroic harvests plunders
		fleet "Marauder fleet VIII"
	npc evade
		government "Pirate"
		system destination
		personality staying heroic harvests plunders coward
		fleet "Marauder fleet IX"
	npc evade
		government "Pirate"
		system destination
		personality staying heroic harvests plunders
		fleet "Marauder fleet X"
	on complete
		payment 25000 175
		payment 100000
		dialog `The cryostasis pod opens with a hiss. Your passenger wakes up and, before he's fully conscious, a team of well-armed guards takes him away. You collect your payment of <payment>.`
		
mission "Cryostasis Organ Transplant (easy)"
	job
	repeat
	passengers 1
	deadline 1 1
	name "Urgent Organ Transplant"
	description "An organ donor has recently passed on. An organ urgently needs to be delivered to the recipient by <date>. Reliable cold storage is required. Payment is <payment>."
	source
		government "Republic" "Free Worlds" "Syndicate"
		not attributes "uninhabited"
	to offer
		random < 25
	on offer
		require "Cryostasis Pod"
	destination
		distance 2 10
		not attributes "uninhabited" "station"
	on complete
		payment 25000 175
		dialog `The cryostasis pod opens with a hiss and you retrieve the donated organ. A medical team rushes it to the intended recipient. You may have saved a life. Your payment of <payment> is just a bonus.`
		
mission "Cryostasis Organ Transplant (medium)"
	job
	repeat
	passengers 1
	deadline 3 1
	name "Urgent Organ Transplant"
	description "An organ donor has recently passed on. These organs urgently need to be delivered to their recipients by <date>. Delivery to <destination> is less urgent and should be saved for last. Payment is <payment>."
	source
		government "Republic" "Free Worlds" "Syndicate"
		not attributes "uninhabited"
	to offer
		random < 20
	on offer
		require "Cryostasis Pod"
	stopover
		distance 2 3
		not attributes "uninhabited" "station"
	stopover
		distance 2 3
		not attributes "uninhabited" "station"
	destination
		distance 3 4
		not attributes "uninhabited" "station"
	on stopover
		dialog `You have just one last organ to deliver.`
	on complete
		payment 25000 175
		dialog `The cryostasis pod opens with a hiss and you retrieve the last of the donated organs. A medical team rushes it to the intended recipient. Three lives may have been saved with your help. Compared to that, your payment of <payment> is just a bonus.`
		
mission "Cryostasis Organ Transplant (hard)"
	job
	repeat
	passengers 1
	deadline 3 2
	name "Urgent Organ Transplant"
	description "An organ donor has recently passed on. These organs urgently need to be delivered to their recipients by <date>. Delivery to <destination> is less urgent and should be saved for last. Payment is <payment>."
	source
		government "Republic" "Free Worlds" "Syndicate"
		not attributes "uninhabited"
	to offer
		random < 15
	on offer
		require "Cryostasis Pod"
	stopover
		distance 2 3
		not attributes "uninhabited" "station"
	stopover
		distance 2 3
		not attributes "uninhabited" "station"
	stopover
		distance 2 3
		not attributes "uninhabited" "station"
	stopover
		distance 3 4
		not attributes "uninhabited" "station"
	destination
		distance 4 5
		not attributes "uninhabited" "station"
	on stopover
		dialog `You have just one last organ to deliver.`
	on complete
		payment 25000 175
		dialog `The cryostasis pod opens with a hiss and you retrieve the last of the donated organs. A medical team rushes it to the intended recipient. Five lives may have been saved with your help. Compared to that, your payment of <payment> is just a bonus.`
